<!DOCTYPE html>
<html>
<head>
	<meta charset="ISO-8859-1"> 
	<title></title>

</head>
<body>
	<button onclick="iniciar()">iniciar</button>
	<!--<button onclick="test2()">afinador</button>-->
	<button onclick="playNote(329.628);"> 1</button>
	<button onclick="playNote(391.995);"> 2</button>
	<button onclick="playNote(523.251);"> 3</button>
	<button onclick="playNote(195.998);"> G3</button>
	<button onclick="playNote(293.665);"> D4</button>
	<button onclick="playNote(440);"> A4</button>
	<button onclick="playNote(659.255);"> E5</button>

	<button onclick="stopNote();"> stop</button>

	<div id="afinador"></div>

</body>
<script src="js/AfinadorCromatico.js"></script>
<script type="text/javascript">
	
	var afinador = null;
	var nota;
	var audioContext = new AudioContext();
	var osc = null;

	window.onload = function(){

		afinador = new AfinadorCromatico();

	}

	function iniciar(){

		afinador.iniciarAfinador();
		//afinador.actualizarAfinador();
		//document.getElementById("afinador").innerHTML = nota;
		document.getElementById("afinador").innerHTML = afinador.getNota();

		//nota = afinador.getNota();
	}

/*
	function test2(){
		//afinador.iniciarAfinador();
		document.getElementById("afinador").innerHTML = afinador.getNota();
	}
*/


	



	window.playNote = function playNote(freq){
		stopNote();
		osc = audioContext.createOscillator();
		osc.connect(audioContext.destination);
		osc.frequency.value = freq;
		osc.start(0);
	};

	window.stopNote = function stopNote(){
		if(osc) {
			osc.stop();
			osc.disconnect();
			osc = null;
		}
	};










</script>
</html>