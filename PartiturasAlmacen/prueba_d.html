<!DOCTYPE html>
<html>
<head>
	<title>MidiConvert</title>
	<script type="text/javascript" src="js/MidiConvert.js"></script>
	<script type="text/javascript" src="js/conversorMidiJsonRAW.js"></script>
	<script type="text/javascript" src="js/PartituraJson.js"></script>
	
</head>
<body>


	<input id="midiNuevo" type="file" accept="audio/midi">

	<div id="Results">
		<textarea id="ResultsText"></textarea>-

		<textarea id="ResultsText2"></textarea>-


	</div>

	<button onclick="crearPartituraJson();"> Prueba </button>

	
	<script type="text/javascript">

		


	document.querySelector("#midiNuevo").addEventListener("change", function(e){

		cogerMidi(e, "#ResultsText");

		
	});



	function crearPartituraJson(){

		var archvoJsonRaw = document.querySelector("#ResultsText").value;

		var partituraJson = new PartituraJson(archvoJsonRaw);

		//document.querySelector("#ResultsText2").value = partituraJson.getJsonRaw();

		// keys del raw header,startTime,duration,tracks

		//alert(Object.keys(partituraJson.jsonParse()));

		//var rawJson = partituraJson.getJsonRaw();
/*
		// keys de la keys tracks: startTime,duration,length,notes,controlChanges,id,name

		//alert(Object.keys(rawJson.tracks[0]));


		//alert(rawJson.tracks[0].name);   // titulo de la partitura


		//alert(rawJson.tracks[1].notes[0]); asi es como se accede a las notas 
		solo hace falta poner la key name pasa sacar la nota.

*/

		//alert(rawJson.tracks[1].notes[0].name);

		//alert(partituraJson.creaPartitura()[0];
		//var partitura = partituraJson.creaPartitura();

		var partitura = partituraJson.creaPartitura();
		//alert(partitura[0]);

		document.querySelector("#ResultsText2").value = partitura;







		//document.querySelector("#ResultsText2").value = document.querySelector("#ResultsText").value;






	}






























	</script>

</body>
</html>